(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{315:function(e,t,a){},317:function(e,t,a){},510:function(e,t,a){},512:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),l=a.n(c),o=(a(315),a(44)),u=a.n(o),s=a(66),i=a(28),d=(a(317),a(4)),p=a(215),m=a.n(p),f=a(297),E=a.n(f),b=a(32),O=a(303),v=a.n(O),g=a(160),h=function(e){var t=e.issueList,a=e.setAddIssueOpen,c=e.setAddOrUpdate,l=e.setEditInitVals,o=e.deleteIssue,u=t.sort((function(e,t){return e.ACCOUNTNO-t.ACCOUNTNO})).map((function(e,t){var a=e.RECORDNO,n=e.ACCOUNTNO,c=e.TITLE,l=e.ACCOUNTTYPE,o=e.NORMALBALANCE;return r.a.createElement(b.FlatTableRow,{key:t},r.a.createElement(b.FlatTableCell,null,n),r.a.createElement(b.FlatTableCell,null,c),r.a.createElement(b.FlatTableCell,null,l),r.a.createElement(b.FlatTableCell,null,o),r.a.createElement(b.FlatTableCell,null,r.a.createElement(g.ActionPopover,null,r.a.createElement(g.ActionPopoverItem,{icon:"edit",onClick:function(){return s(a,n,c,l,o)}},"Edit"),r.a.createElement(g.ActionPopoverItem,{icon:"delete",onClick:function(){return d(n)}},"Delete"))))})),s=function(e,t,n,r,o){c("Update"),l({recordNo:e,accountNo:t,title:n,accountType:r,normalBalance:o}),a(!0)},d=function(e){o(e)},p=Object(n.useState)({start:0,end:10}),m=Object(i.a)(p,2),f=m[0],E=m[1],O=Object(n.useState)(1),h=Object(i.a)(O,2),T=h[0],j=h[1];return r.a.createElement("div",{id:"issue-list"},r.a.createElement(b.FlatTable,{isZebra:!0,hasStickyHead:!0,hasStickyFooter:!0,footer:r.a.createElement(v.a,{totalRecords:u.length,showPageSizeSelection:!0,pageSize:10,currentPage:T,onPagination:function(e,t){return function(e,t){var a=(e-1)*t;E({start:a,end:a+t}),j(e)}(e,t)},pageSizeSelectionOptions:[{id:"10",name:10},{id:"25",name:25}]})},r.a.createElement(b.FlatTableHead,null,r.a.createElement(b.FlatTableRow,null,r.a.createElement(b.FlatTableHeader,null,"Account Number"),r.a.createElement(b.FlatTableHeader,null,"Title"),r.a.createElement(b.FlatTableHeader,null,"Account Type"),r.a.createElement(b.FlatTableHeader,null,"Normal Balance"),r.a.createElement(b.FlatTableHeader,null))),r.a.createElement(b.FlatTableBody,null,function(){var e=f.start,t=f.end;return e<0?u:t>u.length?u.slice(e,u.length):u.slice(e,t)}())))},T=a(304),j=a.n(T),y=a(64),I=a.n(y),x=a(121),A=a(120),S=a.n(A),w=function(e){var t=e.addIssueOpen,a=e.setAddIssueOpen,n=e.setAddOrUpdate,c=e.setEditInitVals,l=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"DELETE",e.next=4,fetch("/api/logout",{method:"DELETE"});case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(j.a,{id:"nav-bar",navigationType:"dark"},r.a.createElement(I.a,{display:"flex",flex:"1",margin:"0 auto"},r.a.createElement(x.Menu,{menuType:"dark",display:"flex",flex:"1"},r.a.createElement(I.a,{height:"",flex:"1"},"Welcome ",S.a.get("username"),r.a.createElement(x.MenuItem,{icon:"person",submenu:!0,submenuDirection:"down"},r.a.createElement(x.MenuItem,{onClick:l},"Log Out"))),r.a.createElement(x.MenuItem,{icon:"add",onClick:function(){a(!t),c({recordNo:"",accountNo:"",title:"",accountType:"",normalBalance:""}),n("Add")}},"Add Account"))))},C=a(67),N=a(158),k=a.n(N),F=a(305),U=a.n(F),P=a(75),L=a.n(P),V=a(157),B=a(74),D=a.n(B),R=function(e){var t=e.text,a=e.fieldKey,n=e.required,c=e.editInitVals,l=e.setEditInitVals,o=e.addOrUpdate;return r.a.createElement(D.a,{size:"small",required:n,label:t,readOnly:"Update"==o&&"accountNo"==a,value:c[a],onChange:function(e){return l(Object(C.a)(Object(C.a)({},c),{},Object(V.a)({},a,e.target.value)))}})},M=a(76),H=function(e){var t=e.addIssueOpen,a=e.setAddIssueOpen,c=e.addIssue,l=e.addOrUpdate,o=e.editInitVals,u=e.setEditInitVals;Object(n.useEffect)((function(){return m(0),function(){}}),[t]);var s=Object(n.useState)(0),d=Object(i.a)(s,2),p=d[0],m=d[1];return r.a.createElement(U.a,{open:t,title:l+" GL Account",subtitle:"Please enter GL account details"},r.a.createElement(k.a,{stickyFooter:!0,onSubmit:function(e){return e.preventDefault(),m(0),""===o.title&&(""===o.accountNo||o.accountNo.length<5)?m(2):""===o.title||""===o.accountNo||o.accountNo.length<5?m(1):(m(0),c(),void a(!1))},leftSideButtons:r.a.createElement(L.a,{onClick:function(){return a(!t)}},"Cancel"),saveButton:r.a.createElement(L.a,{buttonType:"primary",type:"submit"},"Save"),fieldSpacing:2,errorCount:p},r.a.createElement(R,{text:"Account No (minimum 5 characters)",fieldKey:"accountNo",required:"true",editInitVals:o,setEditInitVals:u,addOrUpdate:l}),r.a.createElement(R,{text:"Title",fieldKey:"title",required:"true",editInitVals:o,setEditInitVals:u,addOrUpdate:l}),r.a.createElement(M.Select,{label:"Account Type",onChange:function(e){return u(Object(C.a)(Object(C.a)({},o),{},{accountType:e.target.value}))},value:o.accountType},r.a.createElement(M.Option,{text:"balancesheet",value:"balancesheet"}),r.a.createElement(M.Option,{text:"incomestatement",value:"incomestatement"})),r.a.createElement(M.Select,{label:"Normal Balance",onChange:function(e){return u(Object(C.a)(Object(C.a)({},o),{},{normalBalance:e.target.value}))},value:o.normalBalance},r.a.createElement(M.Option,{text:"debit",value:"debit"}),r.a.createElement(M.Option,{text:"credit",value:"credit"}))))},q=a(306),z=a.n(q),K=function(e){var t=e.toastMessage,a=e.toastOpen,n=e.setToastOpen,c=e.toastVariant;return r.a.createElement("div",null,r.a.createElement(z.a,{variant:c,open:a,onDismiss:function(e){n(!1)},timeout:2e3},t))};var G=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),p=o[0],f=o[1],b=Object(n.useState)(!1),O=Object(i.a)(b,2),v=O[0],g=O[1],T=Object(n.useState)("success"),j=Object(i.a)(T,2),y=j[0],I=j[1],x=Object(n.useState)(""),A=Object(i.a)(x,2),S=A[0],C=A[1],N=Object(n.useState)("add"),k=Object(i.a)(N,2),F=k[0],U=k[1],P=Object(n.useState)({recordNo:"",accountNo:"",title:"",accountType:"",normalBalance:""}),L=Object(i.a)(P,2),V=L[0],B=L[1];Object(n.useEffect)((function(){return D(),function(){console.log("loaded")}}),[]);var D=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/general");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("accountNo",V.accountNo),t.append("title",V.title),t.append("accountType",V.accountType),t.append("normalBalance",V.normalBalance),"Update"===F&&t.append("recordNo",V.recordNo),a=new URLSearchParams(t),n="Add"===F?"POST":"PUT",e.prev=8,e.next=11,fetch("/api/general/add",{method:n,body:a});case 11:return r=e.sent,console.log(r),e.next=15,r.text();case 15:if("ERROR"!=(c=e.sent)){e.next=18;break}throw console.error("Fail");case 18:return console.log(c),e.next=21,D();case 21:I("success"),C("Add"===F?"Account created successfully":"Account updated successfully"),g(!0),e.next=32;break;case 26:e.prev=26,e.t0=e.catch(8),I("error"),C("Account creation failed, account already exists"),g(!0),console.log(e.t0);case 32:case"end":return e.stop()}}),e,null,[[8,26]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("accountNo",t),n=new URLSearchParams(a),e.next=5,fetch("/api/general/delete",{method:"DELETE",body:n});case 5:return r=e.sent,e.next=8,r.json();case 8:return c=e.sent,console.log(c),e.next=12,D();case 12:I("success"),C("Account deleted successfully"),g(!0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.ThemeProvider,{theme:m.a},r.a.createElement(E.a,null,r.a.createElement(w,{addIssueOpen:p,setAddIssueOpen:f,setAddOrUpdate:U,setEditInitVals:B}),r.a.createElement(h,{issueList:a,setAddIssueOpen:f,setAddOrUpdate:U,setEditInitVals:B,deleteIssue:M}),r.a.createElement(H,{addIssueOpen:p,setAddIssueOpen:f,addIssue:R,addOrUpdate:F,editInitVals:V,setEditInitVals:B}),r.a.createElement(K,{toastMessage:S,toastOpen:v,setToastOpen:g,toastVariant:y})))},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,516)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),c(e),l(e)}))},W=(a(510),function(){var e=Object(n.useState)("demouser"),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("demouser"),o=Object(i.a)(l,2),d=o[0],p=o[1],m=Object(n.useState)(""),f=Object(i.a)(m,2),E=f[0],b=f[1],O=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t),(n=new FormData).append("username",a),n.append("password",d),r=new URLSearchParams(n),"PUT",e.prev=7,e.next=10,fetch("/api/user",{method:"PUT",body:r});case 10:return c=e.sent,e.next=13,c.json();case 13:l=e.sent,console.log(l),l.Error?b(l.Error):window.location.reload(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"login-screen"},r.a.createElement("img",{id:"login-image",src:"https://upload.wikimedia.org/wikipedia/commons/b/b3/Sage_logo.png"}),r.a.createElement(k.a,{id:"login-form"},r.a.createElement(D.a,{label:"Username",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(D.a,{type:"password",label:"Password",value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement(L.a,{buttonType:"primary",type:"submit",onClick:O},"Sign In"),r.a.createElement("br",null),r.a.createElement("span",{style:{color:"red"}},E)))}),Y=a(216),Z=a(19);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y.a,null,r.a.createElement(Z.a,{exact:!0,path:"/"},S.a.get("usersession")?r.a.createElement(G,null):r.a.createElement(W,null)))),document.getElementById("root")),J()}},[[512,1,2]]]);
//# sourceMappingURL=main.95acf0ac.chunk.js.map